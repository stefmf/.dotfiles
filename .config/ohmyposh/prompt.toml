version = 3
final_space = true
console_title_template = '{{ .Shell }} in {{ .Folder }}'

[secondary_prompt]
template = '❯❯ '
foreground = 'magenta'
background = 'transparent'

[transient_prompt]
template = '❯ '
background = 'transparent'
foreground_templates = [
  '{{ if gt .Code 0 }}red{{ end }}',
  '{{ if eq .Code 0 }}magenta{{ end }}',
]

# ┌───────────────────────────────────────────────────────────────────┐
# │                               MAIN PROMPT                        │
# └───────────────────────────────────────────────────────────────────┘

# 1) LEFT-aligned block: path + git (no newline after this)
[[blocks]]
type = "prompt"
alignment = "left"
newline = false
filler = " "       # this filler is just a spacer; it won't be used here
[[blocks.segments]]
type = "path"
style = "plain"
template = "{{ .Path }}"
foreground = "blue"
background = "transparent"
[blocks.segments.properties]
style = "full"

[[blocks.segments]]
type = "git"
style = "plain"
template = " {{ .HEAD }}{{ if or (.Working.Changed) (.Staging.Changed) }}*{{ end }} <cyan>{{ if gt .Behind 0 }}⇣{{ end }}{{ if gt .Ahead 0 }}⇡{{ end }}</>"
foreground = "p:grey"
background = "transparent"
[blocks.segments.properties]
branch_icon = " "
commit_icon = "@"
fetch_status = true

# 2) RIGHT-aligned block: SSH icon (same line, pushed to far-right)
[[blocks]]
type = "prompt"
alignment = "right"
newline = false
filler = " "        # this filler *is* used: pushes the SSH segment all the way right
[[blocks.segments]]
type = "text"
style = "plain"
# only render on SSH sessions:
template = '{{ if or .Env.SSH_CONNECTION .Env.SSH_CLIENT }}🔒 SSH{{ end }}'
foreground = "green"
background = "transparent"

# 3) SECOND LINE: the actual input prompt
[[blocks]]
type = "prompt"
alignment = "left"
newline = true     # force a linebreak before this block
[[blocks.segments]]
type = "text"
style = "plain"
template = "❯"
foreground_templates = [
  "{{ if gt .Code 0 }}red{{ end }}",
  "{{ if eq .Code 0 }}magenta{{ end }}",
]
background = "transparent"
