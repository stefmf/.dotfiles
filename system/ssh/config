# Include Colima SSH configuration if it exists
Include ~/.colima/ssh_config

# Include local SSH configuration
Include ~/.ssh/config.local

# Personal machines on Tailscale
Host lucky
    HostName lucky

Host dreams
    HostName dreams

Host draco
    HostName draco

# Personal machines NOT on Tailscale
Host mini-serv
    HostName 192.168.0.19

# Work machine
Host swavesec
    HostName 192.168.0.156
    User e195761
    IdentityFile ~/.ssh/id_work

# =====================================================================
# Global defaults for all SSH connections
# =====================================================================
Host *
    User stef
    Port 22
    IdentityFile ~/.ssh/id_personal
    AddKeysToAgent yes
    UseKeychain yes
    PreferredAuthentications publickey
    PasswordAuthentication no

    # Connection behavior
    ServerAliveInterval 60
    ServerAliveCountMax 10
    TCPKeepAlive yes
    Compression yes

    # Connection multiplexing
    ControlMaster auto
    ControlPersist 2m
    ControlPath ~/.ssh/sockets/%r@%h:%p

    # Security settings
    GSSAPIAuthentication no       # Skip Kerberos auth (faster)
    HashKnownHosts yes            # Obfuscate known_hosts entries
    StrictHostKeyChecking ask     # Prompt before trusting new hosts
